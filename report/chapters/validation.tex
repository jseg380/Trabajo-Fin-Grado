\chapter{Results and validation}

This chapter presents the results of the implementation, validating the functionality of the AlDiaCAR prototype against the objectives defined in Chapter 1. The validation process confirms that the system's key features are operational and effectively address the problem statement outlined for our user persona, Alejandro Martínez. This chapter provides visual evidence of the working frontend, complemented by a summary of the automated tests that verify the backend logic.

\section{Frontend validation via core user workflows}

The most direct way to validate the application is to walk through the essential user journeys. The following sections use screenshots from the running application to demonstrate that the primary features have been successfully implemented.

\subsection{User registration and authentication}
The first step for any user is to create an account and log in. The system's authentication flow, managed by the components in \texttt{/app/(auth)}, was tested manually and via Playwright's E2E tests. Figure \ref{fig:login-screen} shows the application's entry point, and Figure \ref{fig:profile-screen} shows the user's profile after a successful login, confirming the authentication and data retrieval process is working.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.35\textwidth]{images/mobile/login.png}
    \caption{The user login screen.}
    \label{fig:login-screen}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.35\textwidth]{images/mobile/profile.png}
    \caption{The user profile screen after successful authentication.}
    \label{fig:profile-screen}
\end{figure}


\subsection{Vehicle fleet management}
A core requirement for Alejandro is to manage his personal fleet. The application provides a seamless interface to add and view his cars. Figure \ref{fig:add-vehicle} shows the form used to add a vehicle, and Figure \ref{fig:vehicle-list} shows the central list of all his registered vehicles, providing a complete overview of his fleet. This validates the vehicle CRUD (Create, Read, Update, Delete) functionality.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.4\textwidth]{images/mobile/vehicle-add-2.png}
    \caption{Adding a new vehicle to the user's fleet.}
    \label{fig:add-vehicle}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.4\textwidth]{images/mobile/vehicle-list.png}
    \caption{The user's list of registered vehicles.}
    \label{fig:vehicle-list}
\end{figure}

\subsection{Sustainability and maintenance recommendations}
The application's primary goal is to provide actionable, data-driven advice. Figure \ref{fig:recommendation-screen} demonstrates the recommendation system in action, suggesting the most eco-friendly vehicle for a trip. Figure \ref{fig:maintenance-screen} shows the main dashboard, which displays sorted maintenance alerts, directly addressing Alejandro's pain point of overlooking important tasks.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.4\textwidth]{images/mobile/routes.png}
    \caption{The vehicle recommendation interface.}
    \label{fig:recommendation-screen}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.4\textwidth]{images/mobile/maintenance.png}
    \caption{The main dashboard displaying maintenance alerts.}
    \label{fig:maintenance-screen}
\end{figure}

\section{Backend logic and API validation}
To validate the backend logic independently of the frontend, a comprehensive suite of automated integration tests was developed using Jest and Supertest. These tests verify the correctness of the API endpoints, business logic, and database interactions in a controlled environment.

A key example from this test suite is the validation of the sustainability recommendation endpoint. The test case, shown below, verifies that the API correctly processes an authenticated request and returns a properly calculated and sorted list of vehicle recommendations, which is a core piece of the application's business logic.

\begin{lstlisting}[language=JavaScript, caption={Integration test for the recommendation API from \texttt{tests/backend/features.test.js}}]
it('should return a sorted list of vehicle recommendations', async () => {
  const res = await request(app)
    .post('/api/recommendations')
    .set('Cookie', `jwt=${token}`) // Manually set auth cookie
    .send({ distance: 100 });

  expect(res.statusCode).toEqual(200);
  expect(Array.isArray(res.body)).toBe(true);
  
  // Verify the business logic: is the list sorted by emissions?
  expect(res.body[0].totalEmissions).toBeLessThanOrEqual(res.body[1].totalEmissions);
});
\end{lstlisting}
This test confirms not only that the endpoint is reachable and secure, but also that its complex logic—calculating emissions for multiple vehicles and sorting them—is functioning as designed. A full summary of the test strategy is available in Appendix D.

\section{Validation summary}
The combination of visual confirmation from the frontend and successful execution of the automated test suites confirms that the prototype successfully implements its core objectives. Table \ref{tab:validation-summary} maps the project objectives to their implemented and validated status.

\begin{table}[h!]
    \centering
    \caption{Summary of Validated Project Objectives}
    \label{tab:validation-summary}
    \begin{tabular}{|p{0.3\textwidth}|p{0.3\textwidth}|p{0.3\textwidth}|}
        \hline
        \textbf{Objective} & \textbf{Validation Method} & \textbf{Status} \\
        \hline \hline
        Cross-platform accessibility & Manual testing \& Playwright E2E tests on web browser & Implemented \\
        \hline
        Vehicle management (CRUD) & Frontend Screenshots, Backend tests (Jest), E2E test (Playwright) & Implemented \\
        \hline
        Authentication system & Frontend Screenshots, Backend tests (Jest), E2E test (Playwright) & Implemented \\
        \hline
        Maintenance automation & Frontend Screenshots, Backend integration test (Jest) & Implemented \\
        \hline
        Sustainability recommendation & Frontend Screenshots, Backend integration test (Jest) & Implemented \\
        \hline
        Gamification system & Backend integration test for achievements (Jest) & Implemented \\
        \hline
    \end{tabular}
\end{table}
