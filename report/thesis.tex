%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Short Sectioned Assignment LaTeX Template Version 1.0 (5/5/12)
% This template has been downloaded from: http://www.LaTeXTemplates.com
% Original author:  Frits Wenneker (http://www.howtotex.com)
% License: CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[12pt, a4paper, oneside]{book}

\usepackage[utf8]{inputenc}             % Document encoding
\usepackage[T1]{fontenc}                % Use 8-bit encoding that has 256 glyphs
\usepackage[english]{babel}             % Support English
\usepackage{fourier}                    % Adobe Utopia font for the document
\usepackage{listings}                   % Code formatting
\usepackage{url}                        % URLs and hyperlinks
\usepackage{graphics, graphicx, float}  % Image positioning
\usepackage{cite}                       % Include cites from the bibliography.bib file
\usepackage{fancyhdr}                   % Custom headers and footers
\usepackage{enumitem}                   % For compact itemize
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{adjustbox}
\usepackage{geometry}
\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{titlesec, blindtext, color}
\usepackage[Lenny]{fncychap}
\usepackage[table,xcdraw,x11names]{xcolor}
\usepackage[most]{tcolorbox}
\usepackage[style=indexgroup]{glossaries}
\usepackage{etoolbox}                   % For patching commands
\usepackage{tikz}
\usepackage{dirtree}
\usepackage{array}

\hypersetup{
	colorlinks=true,	  % False: boxed links; true: colored links
	linkcolor=SteelBlue1, % Color of internal links
	urlcolor=RoyalBlue3   % color of external links
}
\renewcommand{\familydefault}{\sfdefault}
\setlength{\headheight}{15pt}           % Customize the height of the header


% Custom diagrams
\usetikzlibrary{
    shapes.geometric, % For cylinder, ellipse, etc.
    arrows.meta,      % For modern arrowheads like -{Latex}
    positioning,      % For advanced node placement (e.g., right=of...)
    shapes.multipart, % For nodes with multiple parts (nodepart)
    backgrounds,      % For drawing layers (on background layer)
    fit,              % To fit nodes around other nodes
    shadows,          % For drop shadows
    calc              % For calculations if needed
}

% --- GLOBAL TIKZ STYLES for the entire thesis ---
\tikzset{
    % Style for main components (frontend, backend)
    comp/.style={
        rectangle, 
        rounded corners, 
        draw=black, 
        fill=blue!20,
        text width=4cm, 
        align=center, 
        minimum height=2cm,
        font=\small
    },
    % Style for the user node
    user/.style={
        ellipse, 
        draw=black, 
        fill=green!20, 
        minimum height=1cm
    },
    % Style for the database (cylinder shape)
    db/.style={
        cylinder, 
        shape border rotate=90, 
        draw=black, 
        fill=orange!30, 
        aspect=0.25, 
        minimum height=1.5cm,
        text width=2.5cm,
        align=center,
        font=\small
    },
    % Style for the background environment box
    env/.style={
        rectangle,
        draw=gray,
        fill=gray!10,
        rounded corners,
        dashed,
        label={[gray]north east:#1} % Use the argument as a label
    },
    % Style for the arrows
    arrow/.style={
        thick, 
        -{Stealth[]} % Requires arrows.meta library
    }
}


% Custom fancypagestyle for all the pages in the frontmatter (prev to the "content")
\fancypagestyle{frontmatterstyle}{
    \fancyhf{} % Clear all header and footer fields
    \renewcommand{\headrulewidth}{0pt} % No header rule
    \renewcommand{\footrulewidth}{0pt} % No footer rule
}

% Custom fancypagestyle for all the pages in the mainmatter ("content")
\fancypagestyle{mainmatterstyle}{
    \fancyhf{} % Clear all header and footer fields
    \renewcommand{\headrulewidth}{0pt} % No header rule
    \renewcommand{\footrulewidth}{0.4pt}
    \fancyfoot[L]{Juan Manuel Segura Duarte}
    \fancyfoot[R]{\thepage}
}

\newcommand{\textgap}{\vspace{1em}}
\definecolor{gray75}{gray}{0.75}
\definecolor{licensetitle}{RGB}{30,70,120}
\newcommand{\hsp}{\hspace{20pt}}
\titleformat{\chapter}[hang]{\Huge\bfseries}{\thechapter\hsp\textcolor{gray75}{|}\hsp}{0pt}{\Huge\bfseries}
\setcounter{secnumdepth}{4}

% Verbatim languages {{{
\lstdefinelanguage{JavaScript}{
  keywords={break, case, catch, continue, debugger, default, delete, do, else, finally,
            for, function, if, in, instanceof, new, return, switch, this, throw, try, typeof, var, let, const, while, with},
  keywordstyle=\color{blue}\bfseries,
  ndkeywords={class, export, boolean, throw, implements, import, this},
  ndkeywordstyle=\color{magenta},
  identifierstyle=\color{black},
  sensitive=true,
  comment=[l]//,
  morecomment=[s]{/*}{*/},
  commentstyle=\color{gray}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  morestring=[b]',
  morestring=[b]",
  morestring=[b]`,
}

\lstdefinelanguage{TypeScript}[]{JavaScript}{
  morekeywords={interface, type, private, public, protected, as, any, unknown, never, enum},
}
% }}}

% Glossary entries
\input{prefaces/glossary}


% Document
\begin{document}

    % Apply empty style to ALL frontmatter pages (TOC, LOF, LOT, etc.)
    \frontmatter
    \pagestyle{frontmatterstyle}  % All frontmatter pages will be empty
    \patchcmd{\chapter}{plain}{frontmatterstyle}{}{} % First page of chapters with same style as the rest

    % Title page
    \input{prefaces/title-page}

    % Preface
    \input{prefaces/preface}

    % Index
    \newpage
    \tableofcontents

    % Image index
    \newpage
    \listoffigures

    % Table index
    \newpage
    \listoftables 

    % Glossary
    % \glsaddall[types={main}]         % Add all entries, no matter if they have a corresponding \gls
    \printglossary

    % Restore normal style for main content
    \mainmatter


    % Chapters {{{

    \pagestyle{mainmatterstyle}  % All frontmatter pages will be empty

    % 1. Introduction
    \input{chapters/1_introduction}

    % 2. Background and related work
    \input{chapters/2_background}

    % 3. Product definition
    \input{chapters/3_definition}

    % 4. System design
    \input{chapters/4_system-design}

    % 5. Code implementation
    \input{chapters/5_implementation}

    % 6. Validation
    \input{chapters/6_validation}

    % 7. Management and planning
    \input{chapters/7_planning}

    % 8. Conclusion and future work
    \input{chapters/8_conclusion}

    % }}}


    % Bibliography
    \clearpage
    \newpage
    \addcontentsline{toc}{chapter}{Bibliography}
    \pagestyle{frontmatterstyle}  % All frontmatter pages will be empty
    \bibliographystyle{unsrt}
    \bibliography{bibliography}

    % Appendices {{{

    \appendix

    % API reference
    \input{appendices/api-reference}

    % MongoDB schemas (sort of table definition for NoSQL)
    \input{appendices/db-schemas}

    % }}}
	
\end{document}
